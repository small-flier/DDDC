{"version":3,"file":"register.js","sources":["uni_modules/uni-id-pages/pages/register/register.vue","../../../../../HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli-vite/uniPage:/dW5pX21vZHVsZXNcdW5pLWlkLXBhZ2VzXHBhZ2VzXHJlZ2lzdGVyXHJlZ2lzdGVyLnZ1ZQ"],"sourcesContent":["<!-- 账号注册页 -->\r\n<template>\r\n\t<view class=\"uni-content\">\r\n\t\t<match-media :min-width=\"690\">\r\n\t\t\t<view class=\"login-logo\">\r\n\t\t\t\t<image :src=\"logo\"></image>\r\n\t\t\t</view>\r\n\t\t\t<!-- 顶部文字 -->\r\n\t\t\t<text class=\"title title-box\">用户名密码注册</text>\r\n\t\t</match-media>\r\n\t\t<uni-forms ref=\"form\" :value=\"formData\" :rules=\"rules\" validate-trigger=\"submit\" err-show-type=\"toast\">\r\n\t\t\t<uni-forms-item name=\"username\" required>\r\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusUsername\" @blur=\"focusUsername = false\"\r\n\t\t\t\t\tclass=\"input-box\" placeholder=\"请输入用户名\" v-model=\"formData.username\" trim=\"both\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"nickname\">\r\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusNickname\" @blur=\"focusNickname = false\"\r\n\t\t\t\t\tclass=\"input-box\" placeholder=\"请输入用户昵称\" v-model=\"formData.nickname\" trim=\"both\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"password\" v-model=\"formData.password\" required>\r\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusPassword\" @blur=\"focusPassword = false\"\r\n\t\t\t\t\tclass=\"input-box\" maxlength=\"20\"\r\n\t\t\t\t\t:placeholder=\"'请输入' + (config.passwordStrength == 'weak'?'6':'8') + '-16位密码'\" type=\"password\"\r\n\t\t\t\t\tv-model=\"formData.password\" trim=\"both\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item name=\"password2\" v-model=\"formData.password2\" required>\r\n\t\t\t\t<uni-easyinput :inputBorder=\"false\" :focus=\"focusPassword2\" @blur=\"focusPassword2 =false\"\r\n\t\t\t\t\tclass=\"input-box\" placeholder=\"再次输入密码\" maxlength=\"20\" type=\"password\" v-model=\"formData.password2\"\r\n\t\t\t\t\ttrim=\"both\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-forms-item>\r\n\t\t\t\t<uni-captcha ref=\"captcha\" scene=\"register\" v-model=\"formData.captcha\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t\t<uni-id-pages-agreements scope=\"register\" ref=\"agreements\"></uni-id-pages-agreements>\r\n\t\t\t<button class=\"uni-btn\" type=\"primary\" @click=\"submit\">注册</button>\r\n\t\t\t<button @click=\"navigateBack\" class=\"register-back\">返回</button>\r\n\t\t\t<match-media :min-width=\"690\">\r\n\t\t\t\t<view class=\"link-box\">\r\n\t\t\t\t\t<text class=\"link\" @click=\"registerByEmail\">邮箱验证码注册</text>\r\n\t\t\t\t\t<text class=\"link\" @click=\"toLogin\">已有账号？点此登录</text>\r\n\t\t\t\t</view>\r\n\t\t\t</match-media>\r\n\t\t</uni-forms>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport rules from './validator.js';\r\n\timport mixin from '@/uni_modules/uni-id-pages/common/login-page.mixin.js';\r\n\timport config from '@/uni_modules/uni-id-pages/config.js'\r\n\timport {\r\n\t\tstore,\r\n\t\tmutations\r\n\t} from '@/uni_modules/uni-id-pages/common/store.js'\r\n\r\n\tconst uniIdCo = uniCloud.importObject(\"uni-id-co\")\r\n\texport default {\r\n\t\tmixins: [mixin],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tformData: {\r\n\t\t\t\t\tusername: \"\",\r\n\t\t\t\t\tnickname: \"\",\r\n\t\t\t\t\tpassword: \"\",\r\n\t\t\t\t\tpassword2: \"\",\r\n\t\t\t\t\tcaptcha: \"\"\r\n\t\t\t\t},\r\n\t\t\t\trules,\r\n\t\t\t\tfocusUsername: false,\r\n\t\t\t\tfocusNickname: false,\r\n\t\t\t\tfocusPassword: false,\r\n\t\t\t\tfocusPassword2: false,\r\n\t\t\t\tlogo: \"/static/logo.png\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.$refs.form.setRules(this.rules)\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// #ifdef H5\r\n\t\t\tdocument.onkeydown = event => {\r\n\t\t\t\tvar e = event || window.event;\r\n\t\t\t\tif (e && e.keyCode == 13) { //回车键的键值为13\r\n\t\t\t\t\tthis.submit()\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * 触发表单提交\r\n\t\t\t */\r\n\t\t\tsubmit() {\r\n\t\t\t\tthis.$refs.form.validate().then((res) => {\r\n\t\t\t\t\tif (this.formData.captcha.length != 4) {\r\n\t\t\t\t\t\tthis.$refs.captcha.focusCaptchaInput = true\r\n\t\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\t\ttitle: '请输入验证码',\r\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.needAgreements && !this.agree) {\r\n\t\t\t\t\t\treturn this.$refs.agreements.popup(() => {\r\n\t\t\t\t\t\t\tthis.submitForm(res)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.submitForm(res)\r\n\t\t\t\t}).catch((errors) => {\r\n\t\t\t\t\tlet key = errors[0].key\r\n\t\t\t\t\tkey = key.replace(key[0], key[0].toUpperCase())\r\n\t\t\t\t\tthis['focus' + key] = true\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsubmitForm(params) {\r\n\t\t\t\tuniIdCo.registerUser(this.formData).then(e => {\r\n\t\t\t\t\t\tthis.loginSuccess(e)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\tconsole.log(e.message);\r\n\t\t\t\t\t\t//更好的体验：登录错误，直接刷新验证码\r\n\t\t\t\t\t\tthis.$refs.captcha.getImageCaptcha()\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tnavigateBack() {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t},\r\n\t\t\ttoLogin() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/login/login-withpwd'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tregisterByEmail() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/uni_modules/uni-id-pages/pages/register/register-by-email'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"@/uni_modules/uni-id-pages/common/login-page.scss\";\r\n\r\n\t@media screen and (max-width: 690px) {\r\n\t\t.uni-content {\r\n\t\t\tmargin-top: 15px;\r\n\t\t\theight: 100%;\r\n\t\t\tbackground-color: #fff;\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (min-width: 690px) {\r\n\t\t.uni-content {\r\n\t\t\tpadding: 30px 40px 60px;\n\t\t\tmax-height: 530px;\r\n\t\t}\r\n\r\n\t\t.link-box {\r\n\t\t\t/* #ifndef APP-NVUE */\r\n\t\t\tdisplay: flex;\r\n\t\t\t/* #endif */\r\n\t\t\tflex-direction: row;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tmargin-top: 10px;\r\n\t\t}\r\n\r\n\t\t.link {\r\n\t\t\tfont-size: 12px;\r\n\t\t}\r\n\t}\r\n\r\n\t.uni-content ::v-deep .uni-forms-item__label {\r\n\t\tposition: absolute;\r\n\t\tleft: -15px;\r\n\t}\r\n\r\n\tbutton {\r\n\t\tmargin-top: 15px;\r\n\t}\r\n</style>\n","import MiniProgramPage from 'C:/Users/93152/Desktop/转转转/DDDC/uni_modules/uni-id-pages/pages/register/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","mixin","rules","uni"],"mappings":";;;;;AAuDC,MAAM,UAAUA,cAAAA,GAAS,aAAa,WAAW;AACjD,MAAK,YAAU;AAAA,EACd,QAAQ,CAACC,8CAAAA,KAAK;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,UAAU;AAAA,QACT,UAAU;AAAA,QACV,UAAU;AAAA,QACV,UAAU;AAAA,QACV,WAAW;AAAA,QACX,SAAS;AAAA,MACT;AAAA,aACDC,gDAAK;AAAA,MACL,eAAe;AAAA,MACf,eAAe;AAAA,MACf,eAAe;AAAA,MACf,gBAAgB;AAAA,MAChB,MAAM;AAAA,IACP;AAAA,EACA;AAAA,EACD,UAAU;AACT,SAAK,MAAM,KAAK,SAAS,KAAK,KAAK;AAAA,EACnC;AAAA,EACD,SAAS;AAAA,EASR;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA,IAIR,SAAS;AACR,WAAK,MAAM,KAAK,SAAQ,EAAG,KAAK,CAAC,QAAQ;AACxC,YAAI,KAAK,SAAS,QAAQ,UAAU,GAAG;AACtC,eAAK,MAAM,QAAQ,oBAAoB;AACvC,iBAAOC,cAAAA,MAAI,UAAU;AAAA,YACpB,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACX,CAAC;AAAA,QACF;AACA,YAAI,KAAK,kBAAkB,CAAC,KAAK,OAAO;AACvC,iBAAO,KAAK,MAAM,WAAW,MAAM,MAAM;AACxC,iBAAK,WAAW,GAAG;AAAA,WACnB;AAAA,QACF;AACA,aAAK,WAAW,GAAG;AAAA,MACpB,CAAC,EAAE,MAAM,CAAC,WAAW;AACpB,YAAI,MAAM,OAAO,CAAC,EAAE;AACpB,cAAM,IAAI,QAAQ,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE,aAAa;AAC9C,aAAK,UAAU,GAAG,IAAI;AAAA,OACtB;AAAA,IACD;AAAA,IACD,WAAW,QAAQ;AAClB,cAAQ,aAAa,KAAK,QAAQ,EAAE,KAAK,OAAK;AAC5C,aAAK,aAAa,CAAC;AAAA,OACnB,EACA,MAAM,OAAK;AACXA,wGAAY,EAAE,OAAO;AAErB,aAAK,MAAM,QAAQ,gBAAgB;AAAA,OACnC;AAAA,IACF;AAAA,IACD,eAAe;AACdA,oBAAAA,MAAI,aAAa;AAAA,IACjB;AAAA,IACD,UAAU;AACTA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA,IACD,kBAAkB;AACjBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzID,GAAG,WAAW,eAAe;"}