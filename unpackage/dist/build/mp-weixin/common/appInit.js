"use strict";const e=require("./vendor.js"),o=require("../uni-starter.config.js"),n=e.tr.database();exports.initApp=async function(){o.config.debug,setTimeout((()=>{getApp({allowDefault:!0}).globalData.config=o.config}),1),n.on("error",(function({code:e,message:o}){console.log("onDBError",{code:e,message:o}),console.error(e,o)})),e.tr.interceptObject({async invoke({objectName:o,methodName:n,params:i}){"uni-id-co"==o&&(n.includes("loginBy")||["login","registerUser"].includes(n))&&(console.log("执行登录相关云对象"),i[0].inviteCode=await new Promise((o=>{e.index.getClipboardData({success:function(e){if(console.log("剪切板内容："+e.data),"uniInvitationCode:"==e.data.slice(0,18)){let n=e.data.slice(18,38);console.log("当前用户是其他用户推荐下载的,推荐者的code是："+n),o(n)}else o()},fail(){console.log("error--"),o()},complete(){e.index.hideToast()}})})))},success(e){console.log(e)},complete(){},fail(e){console.error(e)}})};
