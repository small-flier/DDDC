"use strict";const e=require("../../common/vendor.js"),o=require("../../common/assets.js"),r={data:()=>({currentPage:1,current:0,hasLogin:!1,rules:{name:{rules:[{required:!0,errorMessage:"菜名必填"}]}},loadMoreStatus:"more",formData:{},noNeedFetfh:!1,typeColors:{"荤菜":{backgroundColor:"#4335d6",borderColor:"#4335d6",color:"#fff"},"花荤":{backgroundColor:"#35d650",borderColor:"#35d650",color:"#fff"},"素菜":{backgroundColor:"#732626",borderColor:"#732626",color:"#fff"},"果汁":{backgroundColor:"#B93EAA",borderColor:"#B93EAA",color:"#fff"},"汤":{backgroundColor:"#32947F",borderColor:"#32947F",color:"#fff"},"奶茶":{backgroundColor:"#366CA1",borderColor:"#366CA1",color:"#fff"},"其他":{backgroundColor:"#C3DA91",borderColor:"#C3DA91",color:"#fff"}}}),onPullDownRefresh(){this.$refs.udb.loadData({clear:!0},(()=>{e.index.stopPullDownRefresh()}))},onReachBottom(){this.$refs.udb.loadMore()},onShow(){var o,r;e.index.getStorageSync("needFetch")&&(null==(o=this.$refs.udb)||o.reset(),null==(r=this.$refs.udb)||r.refresh(),e.index.setStorageSync("needFetch",!1))},onLoad(){},methods:{change(o){e.index.showToast({title:this.$t("grid.clickTip")+` ${o.detail.index+1} `+this.$t("grid.clickTipGrid"),icon:"none"})},onqueryload(e){},changeSwiper(e){this.current=e.detail.current},clickBannerItem(o){o.open_url&&e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/common/webview/webview?url="+o.open_url+"&title="+o.title,success:e=>{},fail:()=>{},complete:()=>{}})},handleClick(e){this.formData={...e},this.$refs.popup.open()},handleView(){var o,r;(null==(r=null==(o=this.formData)?void 0:o.file)?void 0:r.url)?e.index.previewImage({current:0,urls:[this.formData.file.url]}):e.index.showToast({title:"这道菜没有上传图片",icon:"none",duration:2e3,mask:!0})},handleEdit(){setTimeout((()=>{const o=this.formData._id;e.index.setStorageSync("tabbarParams",{id:o}),this.$refs.popup.close(),e.index.switchTab({url:"/pages/menu/menu"})}),300)},handleDel(){this.$refs.udb.remove(this.formData._id,{success:()=>{e.index.showToast({title:"删除成功",icon:"none"}),this.$refs.popup.close()}})},handleLoad(e,o){this.loadMoreStatus=o?"noMore":"more"}}};if(!Array){(e.resolveComponent("unicloud-db")+e.resolveComponent("uni-tag")+e.resolveComponent("uni-load-more")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js")+(()=>"../../uni_modules/uni-tag/components/uni-tag/uni-tag.js")+(()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const n=e._export_sfc(r,[["render",function(r,n,l,t,a,i){return{a:e.w((({data:r,loading:n,error:l,options:t},d,s)=>e.e({a:!(n||r.length)},n||r.length?{c:e.f(r,((o,r,n)=>({a:o.bannerfile.url,b:e.o((e=>i.clickBannerItem(o)),o._id),c:o._id}))),d:e.o(((...e)=>i.changeSwiper&&i.changeSwiper(...e))),e:a.current}:{b:o._imports_0},{f:s,g:d})),{name:"d",path:"a",vueId:"4554b4e6-0"}),b:e.sr("bannerdb","4554b4e6-0"),c:e.o(i.onqueryload),d:e.p({collection:"opendb-banner",field:"_id,bannerfile,open_url,title"}),e:e.w((({data:o,loading:r,error:n,options:l},t,d)=>({a:e.f(o,((o,r,n)=>e.e({a:e.t(r+1),b:"4554b4e6-2-"+d+"-"+n+",4554b4e6-1",c:e.p({inverted:!0,text:o.type,type:"success",size:"small",circle:!0,"custom-style":{...a.typeColors[o.type||"其他"]}}),d:o.file&&o.file.url},o.file&&o.file.url?{e:o.file.url}:{},{f:e.t(o.name),g:e.o((()=>i.handleClick(o)),r),h:r}))),b:"4554b4e6-3-"+d+",4554b4e6-1",c:e.p({status:r?"loading":a.loadMoreStatus}),d:d,e:t})),{name:"d",path:"e",vueId:"4554b4e6-1"}),f:e.sr("udb","4554b4e6-1"),g:e.o(i.handleLoad),h:e.p({collection:"menu",field:"name,file,type"}),i:e.t(a.formData.name),j:e.o(((...e)=>i.handleView&&i.handleView(...e))),k:e.o(((...e)=>i.handleEdit&&i.handleEdit(...e))),l:e.o(((...e)=>i.handleDel&&i.handleDel(...e))),m:e.sr("popup","4554b4e6-4"),n:e.p({type:"bottom","background-color":"#fff","safe-area":!0})}}]]);wx.createPage(n);
