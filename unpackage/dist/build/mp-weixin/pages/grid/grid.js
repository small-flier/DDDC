"use strict";const e=require("../../common/vendor.js"),o=require("../../common/assets.js"),n={data:()=>({currentPage:1,current:0,hasLogin:!1,rules:{name:{rules:[{required:!0,errorMessage:"菜名必填"}]}},loadMoreStatus:"more",formData:{},noNeedFetfh:!1}),onPullDownRefresh(){this.$refs.udb.loadData({clear:!0},(()=>{e.index.stopPullDownRefresh()}))},onReachBottom(){this.$refs.udb.loadMore()},onShow(){var o,n;e.index.getStorageSync("needFetch")&&(null==(o=this.$refs.udb)||o.reset(),null==(n=this.$refs.udb)||n.refresh(),e.index.setStorageSync("needFetch",!1))},onLoad(){},methods:{change(o){e.index.showToast({title:this.$t("grid.clickTip")+` ${o.detail.index+1} `+this.$t("grid.clickTipGrid"),icon:"none"})},onqueryload(e){},changeSwiper(e){this.current=e.detail.current},clickBannerItem(o){o.open_url&&e.index.navigateTo({url:"/uni_modules/uni-id-pages/pages/common/webview/webview?url="+o.open_url+"&title="+o.title,success:e=>{},fail:()=>{},complete:()=>{}})},handleClick(e){this.formData={...e},this.$refs.popup.open()},handleView(){var o,n;(null==(n=null==(o=this.formData)?void 0:o.file)?void 0:n.url)?e.index.previewImage({current:0,urls:[this.formData.file.url]}):e.index.showToast({title:"这道菜没有上传图片",icon:"none",duration:2e3,mask:!0})},handleEdit(){setTimeout((()=>{const o=this.formData._id;e.index.setStorageSync("tabbarParams",{id:o}),this.$refs.popup.close(),e.index.switchTab({url:"/pages/menu/menu"})}),300)},handleDel(){this.$refs.udb.remove(this.formData._id,{success:()=>{e.index.showToast({title:"删除成功",icon:"none"}),this.$refs.popup.close()}})},handleLoad(e,o){this.loadMoreStatus=o?"noMore":"more"}}};if(!Array){(e.resolveComponent("unicloud-db")+e.resolveComponent("uni-load-more")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../node-modules/@dcloudio/uni-components/lib/unicloud-db/unicloud-db.js")+(()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const i=e._export_sfc(n,[["render",function(n,i,t,a,r,l){return{a:e.w((({data:n,loading:i,error:t,options:a},d,s)=>e.e({a:!(i||n.length)},i||n.length?{c:e.f(n,((o,n,i)=>({a:o.bannerfile.url,b:e.o((e=>l.clickBannerItem(o)),o._id),c:o._id}))),d:e.o(((...e)=>l.changeSwiper&&l.changeSwiper(...e))),e:r.current}:{b:o._imports_0},{f:s,g:d})),{name:"d",path:"a",vueId:"4554b4e6-0"}),b:e.sr("bannerdb","4554b4e6-0"),c:e.o(l.onqueryload),d:e.p({collection:"opendb-banner",field:"_id,bannerfile,open_url,title"}),e:e.w((({data:o,loading:n,error:i,options:t},a,d)=>({a:e.f(o,((o,n,i)=>e.e({a:e.t(n+1),b:o.file&&o.file.url},o.file&&o.file.url?{c:o.file.url}:{},{d:e.t(o.name),e:e.o((()=>l.handleClick(o)),n),f:n}))),b:"4554b4e6-2-"+d+",4554b4e6-1",c:e.p({status:n?"loading":r.loadMoreStatus}),d:d,e:a})),{name:"d",path:"e",vueId:"4554b4e6-1"}),f:e.sr("udb","4554b4e6-1"),g:e.o(l.handleLoad),h:e.p({collection:"menu",field:"name,file"}),i:e.t(r.formData.name),j:e.o(((...e)=>l.handleView&&l.handleView(...e))),k:e.o(((...e)=>l.handleEdit&&l.handleEdit(...e))),l:e.o(((...e)=>l.handleDel&&l.handleDel(...e))),m:e.sr("popup","4554b4e6-3"),n:e.p({type:"bottom","background-color":"#fff","safe-area":!0})}}]]);wx.createPage(i);
